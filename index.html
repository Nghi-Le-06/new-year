<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LÃ¬ XÃ¬ VÅ© Trá»¥</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
    background:#020312;
    overflow:hidden;
    font-family:'Playfair Display',serif;
    color:white;
}

/* COUNTDOWN */
#countdown{
    position:absolute;
    top:50%;left:50%;
    transform:translate(-50%,-50%);
    font-family:'Cinzel',serif;
    font-size:220px;
    background:linear-gradient(45deg,#fff,#ffd700,#ff4d6d);
    -webkit-background-clip:text;
    background-clip:text;
    color:transparent;
    text-shadow:0 0 60px rgba(255,215,0,0.9);
    animation:pulse 1s infinite alternate;
    z-index:20;
}
@keyframes pulse{
    from{transform:translate(-50%,-50%) scale(1)}
    to{transform:translate(-50%,-50%) scale(1.15)}
}

/* ENVELOPE */
#envelopeScene{
    position:absolute;
    top:50%;left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    display:none;
    z-index:20;
}
.envelope{
    width:220px;height:300px;
    background:linear-gradient(145deg,#b30000,#ff1a1a);
    border-radius:12px;
    cursor:pointer;
    box-shadow:0 0 60px rgba(255,0,0,0.8);
    transition:0.5s;
}
.envelope:hover{transform:scale(1.1)}
.envelope::after{
    content:"ðŸ§§";
    font-size:60px;
    position:absolute;
    top:50%;left:50%;
    transform:translate(-50%,-50%);
}

/* MESSAGE */
#messageBox{
    position:absolute;
    bottom:8%;
    width:100%;
    text-align:center;
    font-size:28px;
    opacity:0;
    transition:1s;
    z-index:30;
}

/* HEART */
#heartCanvas{
    position:absolute;
    top:50%;left:50%;
    transform:translate(-50%,-50%);
    z-index:10;
}

@keyframes heartbeat{
    0%{transform:translate(-50%,-50%) scale(1)}
    50%{transform:translate(-50%,-50%) scale(1.08)}
    100%{transform:translate(-50%,-50%) scale(1)}
}
.beat{
    animation:heartbeat 1s infinite;
}
</style>
</head>
<body>

<div id="countdown">3</div>
<canvas id="fireworks"></canvas>
<canvas id="heartCanvas"></canvas>

<div id="envelopeScene">
    <div class="envelope" onclick="openEnvelope()"></div>
    <p style="margin-top:20px;opacity:0.7">Cháº¡m Ä‘á»ƒ má»Ÿ lÃ¬ xÃ¬</p>
</div>

<div id="messageBox"></div>
<audio id="bgMusic" loop>
    <source src="PIANO.mp3" type="audio/mpeg">
</audio>

<script>

/* ================= COUNTDOWN ================= */
let count=3;
const cd=document.getElementById("countdown");
const countdown=setInterval(()=>{
    cd.textContent=count>0?count:"";
    count--;
    if(count<0){
        clearInterval(countdown);
        cd.style.display="none";
        startFireworks();
    }
},1000);

/* ================= FIREWORKS ================= */
const fw=document.getElementById("fireworks");
const fctx=fw.getContext("2d");
fw.width=innerWidth;
fw.height=innerHeight;

let particles=[];
function createFirework(){
    const x=Math.random()*fw.width;
    const y=Math.random()*fw.height*0.6;
    const colors=["#ff4d6d","#ffd700","#00e5ff","#7cffcb","#ff9f1c","#c77dff"];
    for(let i=0;i<150;i++){
        particles.push({
            x,y,
            angle:Math.random()*2*Math.PI,
            speed:Math.random()*7+2,
            alpha:1,
            color:colors[Math.floor(Math.random()*colors.length)]
        });
    }
}
function animateFW(){
    fctx.fillStyle="rgba(0,0,15,0.25)";
    fctx.fillRect(0,0,fw.width,fw.height);
    particles.forEach(p=>{
        p.x+=Math.cos(p.angle)*p.speed;
        p.y+=Math.sin(p.angle)*p.speed;
        p.alpha-=0.01;
        fctx.fillStyle=p.color.replace(")",","+p.alpha+")").replace("rgb","rgba");
        fctx.beginPath();
        fctx.arc(p.x,p.y,2,0,2*Math.PI);
        fctx.fill();
    });
    particles=particles.filter(p=>p.alpha>0);
    requestAnimationFrame(animateFW);
}
animateFW();

function startFireworks(){
    let interval=setInterval(createFirework,600);
    setTimeout(()=>{
        clearInterval(interval);
        document.getElementById("envelopeScene").style.display="block";
    },10000);
}

/* ================= HEART WITH SOUL ================= */
const hc=document.getElementById("heartCanvas");
const hctx=hc.getContext("2d");
hc.width=innerWidth;
hc.height=innerHeight;

let stars=[];
for(let i=0;i<2500;i++){
    stars.push({
        t:Math.random()*Math.PI*2,
        r:Math.random(),
        depth:Math.random(),
        hue:Math.random()*360
    });
}

function heartShape(t){
    return {
        x:16*Math.pow(Math.sin(t),3),
        y:13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t)
    };
}

function drawHeart(){
    hctx.clearRect(0,0,hc.width,hc.height);
    const cx=hc.width/2;
    const cy=hc.height/2;
    const scale=Math.min(hc.width,hc.height)/45;

    // Nebula core
    const gradient=hctx.createRadialGradient(cx,cy,0,cx,cy,200);
    gradient.addColorStop(0,"rgba(255,100,200,0.4)");
    gradient.addColorStop(1,"rgba(0,0,0,0)");
    hctx.fillStyle=gradient;
    hctx.fillRect(0,0,hc.width,hc.height);

    stars.forEach(s=>{
        s.t+=0.002*(1+s.depth);
        const p=heartShape(s.t);
        const x=cx+p.x*scale*s.r;
        const y=cy-p.y*scale*s.r;
        hctx.fillStyle=`hsl(${s.hue},100%,70%)`;
        hctx.beginPath();
        hctx.arc(x,y,1.5*(1-s.depth),0,Math.PI*2);
        hctx.fill();
    });

    requestAnimationFrame(drawHeart);
}

function openEnvelope(){
    document.getElementById("envelopeScene").style.display="none";

    // ===== PLAY PIANO WITH FADE IN =====
    const music = document.getElementById("bgMusic");
    music.volume = 0;
    music.play();

    let fadeIn = setInterval(()=>{
        if(music.volume < 0.8){
            music.volume += 0.02;
        } else {
            clearInterval(fadeIn);
        }
    },100);

    // ===== START HEART + MESSAGE =====
    hc.classList.add("beat");
    drawHeart();
    startMessage();
}

/* ================= MESSAGE ================= */
const lines=[
"NÄƒm má»›i rá»“i, moa Ã ...",
"Thá»i kháº¯c nÃ y, ngoÃ i kia ngÆ°á»i ta Ä‘ang cÆ°á»i nÃ³i ráº¥t nhiá»u.",
"PhÃ¡o hoa ná»Ÿ rá»±c trÃªn báº§u trá»i.",
"Nhá»¯ng Ä‘iá»u Æ°á»›c Ä‘Æ°á»£c nÃ³i ra tháº­t nhanh.",
"NhÆ°ng trong lÃ²ng sen, má»i thá»© láº¡i cháº­m láº¡i.",

"Sen khÃ´ng nghÄ© vá» tiá»n báº¡c.",
"KhÃ´ng nghÄ© vá» thÃ nh cÃ´ng.",
"KhÃ´ng nghÄ© vá» nhá»¯ng Ä‘iá»u lá»›n lao.",
"Sen chá»‰ nghÄ© Ä‘áº¿n má»™t ngÆ°á»i.",
"VÃ  ngÆ°á»i Ä‘Ã³ lÃ  moa.",

"Sen tá»«ng tá»± há»i,",
"Äiá»u gÃ¬ khiáº¿n má»™t ngÆ°á»i trá»Ÿ nÃªn quan trá»ng Ä‘áº¿n váº­y?",
"LÃ  vÃ¬ há» á»Ÿ bÃªn mÃ¬nh lÃ¢u?",
"Hay vÃ¬ há» khiáº¿n tim mÃ¬nh Ä‘áº­p khÃ¡c Ä‘i?",
"Vá»›i sen,",
"Moa quan trá»ng khÃ´ng pháº£i vÃ¬ thá»i gian.",
"MÃ  vÃ¬ cáº£m giÃ¡c.",
"Cáº£m giÃ¡c ráº±ng náº¿u thiáº¿u moa,",
"Má»™t pháº§n trong sen sáº½ trá»‘ng Ä‘i ráº¥t nhiá»u.",

"CÃ³ nhá»¯ng lÃºc sen Ä‘Ã£ sá»£.",
"Sá»£ ráº±ng mÃ¬nh chÆ°a Ä‘á»§ tá»‘t.",
"Sá»£ ráº±ng mÃ¬nh chÆ°a Ä‘á»§ vá»¯ng vÃ ng.",
"Sá»£ ráº±ng má»™t ngÃ y nÃ o Ä‘Ã³,",
"Moa sáº½ má»‡t má»i vÃ¬ sen.",
"VÃ  bÆ°á»›c Ä‘i xa hÆ¡n má»™t chÃºt.",

"Sen khÃ´ng nÃ³i ra nhá»¯ng Ä‘iá»u Ä‘Ã³ nhiá»u.",
"NhÆ°ng má»—i láº§n nghÄ© Ä‘áº¿n,",
"Tim sen láº¡i náº·ng Ä‘i.",
"KhÃ´ng pháº£i vÃ¬ nghi ngá» tÃ¬nh cáº£m.",
"MÃ  vÃ¬ sen biáº¿t mÃ¬nh yÃªu moa nhiá»u Ä‘áº¿n má»©c nÃ o.",

"Náº¿u nÄƒm qua cÃ³ nhá»¯ng ngÃ y moa buá»“n,",
"CÃ³ nhá»¯ng ngÃ y moa cáº£m tháº¥y cÃ´ Ä‘Æ¡n dÃ¹ váº«n Ä‘ang nÃ³i chuyá»‡n vá»›i sen,",
"ThÃ¬ Ä‘Ã³ lÃ  Ä‘iá»u sen day dá»©t nháº¥t.",
"VÃ¬ Ä‘iá»u duy nháº¥t sen tháº­t sá»± muá»‘n,",
"LÃ  lÃ m nÆ¡i bÃ¬nh yÃªn cho moa.",
"Chá»© khÃ´ng pháº£i lÃ  thÃªm má»™t Ä‘iá»u khiáº¿n moa má»‡t.",

"Sen khÃ´ng há»©a sáº½ hoÃ n háº£o.",
"NhÆ°ng sen há»©a sáº½ há»c cÃ¡ch yÃªu moa tá»‘t hÆ¡n má»—i ngÃ y.",
"KhÃ´ng pháº£i yÃªu báº±ng nhá»¯ng lá»i hoa má»¹.",
"MÃ  báº±ng sá»± á»Ÿ láº¡i.",
"Báº±ng nhá»¯ng cÃ¡i Ã´m Ä‘Ãºng lÃºc.",
"Báº±ng sá»± im láº·ng khi moa cáº§n Ä‘Æ°á»£c láº¯ng nghe.",

"VÃ  cÃ³ má»™t Ä‘iá»u sen muá»‘n nÃ³i tháº­t kháº½...",
"DÃ¹ cho sau nÃ y sá»©c khá»e cá»§a sen cÃ³ giáº£m má»™t chÃºt,",
"Hay sen cÃ³ nhÆ° nÃ o Ä‘i ná»¯a,",
"ThÃ¬ sen váº«n luÃ´n á»Ÿ Ä‘Ã¢y vá»›i moa.",
"á»ž bÃªn cáº¡nh Ä‘á»ƒ yÃªu moa tháº­t lÃ¢u.",
"Tháº­t sÃ¢u.",
"KhÃ´ng pháº£i vÃ¬ thÃ³i quen.",
"MÃ  vÃ¬ lá»±a chá»n.",

"Náº¿u má»™t ngÃ y sen khÃ´ng cÃ²n máº¡nh máº½ nhÆ° bÃ¢y giá»,",
"KhÃ´ng cÃ²n Ä‘á»§ nhanh nháº¹n,",
"KhÃ´ng cÃ²n Ä‘á»§ hoÃ n háº£o theo cÃ¡ch ngÆ°á»i ta mong Ä‘á»£i,",
"ThÃ¬ Ä‘iá»u sen mong nháº¥t,",
"LÃ  trÃ¡i tim mÃ¬nh váº«n cÃ²n Ä‘á»§ sá»©c Ä‘á»ƒ yÃªu moa.",
"VÃ  náº¯m tay moa cháº·t hÆ¡n má»—i khi Ä‘á»i lÃ m moa má»i.",

"Sen khÃ´ng biáº¿t tÆ°Æ¡ng lai sáº½ dÃ i bao nhiÃªu.",
"NhÆ°ng sen biáº¿t má»™t Ä‘iá»u ráº¥t rÃµ.",
"TÃ¬nh cáº£m nÃ y khÃ´ng pháº£i lÃ  nháº¥t thá»i.",
"NÃ³ Ä‘Æ°á»£c xÃ¢y báº±ng nhá»¯ng láº§n tá»•n thÆ°Æ¡ng rá»“i láº¡i chá»n á»Ÿ láº¡i.",
"ÄÆ°á»£c giá»¯ báº±ng nhá»¯ng Ä‘Ãªm khÃ´ng ngá»§ vÃ¬ lo cho moa.",
"ÄÆ°á»£c nuÃ´i lá»›n báº±ng sá»± biáº¿t Æ¡n vÃ¬ moa váº«n cÃ²n á»Ÿ Ä‘Ã¢y.",

"NÄƒm má»›i nÃ y,",
"Sen khÃ´ng xin Ä‘iá»u gÃ¬ cho riÃªng mÃ¬nh.",
"Sen chá»‰ xin cho moa bÃ¬nh an.",
"Xin cho nhá»¯ng Ä‘iá»u lÃ m moa Ä‘au dáº§n nhá» láº¡i.",
"Xin cho nhá»¯ng ná»—i lo trong tim moa nháº¹ hÆ¡n.",
"Xin cho moa nhÃ¬n láº¡i má»™t nÄƒm ná»¯a trÃ´i qua,",
"VÃ  váº«n tháº¥y sen á»Ÿ Ä‘Ã³.",

"Náº¿u cuá»™c Ä‘á»i cÃ³ thá»­ thÃ¡ch chÃºng ta thÃªm láº§n ná»¯a,",
"Sen khÃ´ng há»©a sáº½ khÃ´ng run.",
"NhÆ°ng sen há»©a sáº½ khÃ´ng buÃ´ng.",

"VÃ¬ giá»¯a tháº¿ giá»›i rá»™ng lá»›n nÃ y,",
"Äiá»u khiáº¿n sen tháº¥y mÃ¬nh may máº¯n nháº¥t,",
"LÃ  Ä‘Æ°á»£c yÃªu moa.",
"VÃ  Ä‘Æ°á»£c moa cho phÃ©p yÃªu.",

"NÄƒm má»›i rá»“i...",
"Sen chá»‰ mong má»™t Ä‘iá»u thÃ´i.",
"Cho trÃ¡i tim nÃ y cÃ²n Ä‘á»§ sá»©c Ä‘áº­p vÃ¬ moa tháº­t lÃ¢u.",
"Cho bÃ n tay nÃ y cÃ²n Ä‘á»§ áº¥m Ä‘á»ƒ náº¯m láº¥y tay moa.",
"VÃ  cho hai chÃºng ta,",
"DÃ¹ tháº¿ nÃ o Ä‘i ná»¯a,",
"Váº«n chá»n á»Ÿ láº¡i."
];

const box=document.getElementById("messageBox");
let i=0;

function startMessage(){
    box.style.opacity=1;
    showLine();
}

function showLine(){
    if(i<lines.length){
        box.style.opacity=0;
        setTimeout(()=>{
            box.textContent=lines[i];
            box.style.opacity=1;
            i++;
            setTimeout(showLine,3500);
        },1000);
    }
}

</script>
</body>
</html>
